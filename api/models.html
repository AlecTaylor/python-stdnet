
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Model and Query API &mdash; python stdnet v0.7 documentation</title>
    <link rel="stylesheet" href="../static/celery.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.7',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <link rel="top" title="python stdnet v0.7 documentation" href="../index.html" />
    <link rel="up" title="API" href="index.html" />
    <link rel="next" title="Fields API" href="fields.html" />
    <link rel="prev" title="API" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="fields.html" title="Fields API"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="API"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">python stdnet v0.7 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">API</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="module-stdnet.odm"><span id="model-model"></span></span><div class="section" id="model-and-query-api">
<h1>Model and Query API<a class="headerlink" href="#model-and-query-api" title="Permalink to this headline">¶</a></h1>
<p>The <em>object-data mapper</em> (ODM) is the core of the library. It defines an API for mapping
data in the backend key-value store to objects in Python.
It&#8217;is name is closely related to
<a class="reference external" href="http://en.wikipedia.org/wiki/Object-relational_mapping">object relational Mapping</a> (ORM),
a programming technique for converting data between incompatible
type systems in traditional <a class="reference external" href="http://en.wikipedia.org/wiki/Relational_database">relational databases</a>
and object-oriented programming languages.</p>
<div class="section" id="model">
<h2>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h2>
<p>The object data mapper presents a method of
associating user-defined Python classes, referred as <strong>models</strong>,
with data in a <a class="reference internal" href="backends.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a>.
These python classes are subclasses of
<a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.odm.StdModel</span></tt></a>.</p>
<div class="section" id="stdmodel-class">
<h3>StdModel Class<a class="headerlink" href="#stdmodel-class" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.StdModel">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">StdModel</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> which contains data in <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a>.</p>
<dl class="attribute">
<dt id="stdnet.odm.StdModel._meta">
<tt class="descname">_meta</tt><a class="headerlink" href="#stdnet.odm.StdModel._meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Instance of <a class="reference internal" href="#stdnet.odm.Metaclass" title="stdnet.odm.Metaclass"><tt class="xref py py-class docutils literal"><span class="pre">Metaclass</span></tt></a>, it containes all the information needed
by a <tt class="xref py py-class docutils literal"><span class="pre">stdnet.backendServer</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.StdModel.id">
<tt class="descname">id</tt><a class="headerlink" href="#stdnet.odm.StdModel.id" title="Permalink to this definition">¶</a></dt>
<dd><p>The instance primary key.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.StdModel.uuid">
<tt class="descname">uuid</tt><a class="headerlink" href="#stdnet.odm.StdModel.uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>Universally unique identifier for an instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.StdModel.session">
<tt class="descname">session</tt><a class="headerlink" href="#stdnet.odm.StdModel.session" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> instance which loaded the instance (available
when the instance is loaded from the data server).</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.StdModel.has_all_data">
<tt class="descname">has_all_data</tt><a class="headerlink" href="#stdnet.odm.StdModel.has_all_data" title="Permalink to this definition">¶</a></dt>
<dd><p><tt class="xref docutils literal"><span class="pre">True</span></tt> if this <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> instance has all backend data
loaded. This only apply to persistent instances.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.loadedfields">
<tt class="descname">loadedfields</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.loadedfields" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of fields loaded from database</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.fieldvalue_pairs">
<tt class="descname">fieldvalue_pairs</tt><big>(</big><em>exclude_cache=False</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.fieldvalue_pairs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of fields,values pairs. Fields correspond to
the ones which have been loaded (usually all of them) or
not loaded but modified.
Check the <a class="reference internal" href="../examples/performance.html#performance-loadonly"><em>load_only</em></a> query function for more
details.</p>
<p>If <em>exclude_cache</em> evaluates to <tt class="xref docutils literal"><span class="pre">True</span></tt>, fields with <a class="reference internal" href="fields.html#stdnet.odm.Field.as_cache" title="stdnet.odm.Field.as_cache"><tt class="xref py py-attr docutils literal"><span class="pre">Field.as_cache</span></tt></a>
attribute set to <tt class="xref docutils literal"><span class="pre">True</span></tt> won&#8217;t be included.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a generator of two-elements tuples</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.clear_cache_fields">
<tt class="descname">clear_cache_fields</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.clear_cache_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Set cache fields to <tt class="xref docutils literal"><span class="pre">None</span></tt>. Check <a class="reference internal" href="fields.html#stdnet.odm.Field.as_cache" title="stdnet.odm.Field.as_cache"><tt class="xref py py-attr docutils literal"><span class="pre">Field.as_cache</span></tt></a>
for information regarding fields which are considered cache.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.get_attr_value">
<tt class="descname">get_attr_value</tt><big>(</big><em>attr</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.get_attr_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrive the <em>value</em> for a <em>attr</em> name. The attr can be nested,
for example <tt class="docutils literal"><span class="pre">group__name</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.clone">
<tt class="descname">clone</tt><big>(</big><em>**data</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method for cloning the instance as a new object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data</strong> &#8211; additional which override field data.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a new instance of this class.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.is_valid">
<tt class="descname">is_valid</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.is_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Kick off the validation algorithm by checking all
<a class="reference internal" href="#stdnet.odm.StdModel.loadedfields" title="stdnet.odm.StdModel.loadedfields"><tt class="xref py py-attr docutils literal"><span class="pre">StdModel.loadedfields</span></tt></a> against their respective validation algorithm.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">Boolean indicating if the model validates.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.todict">
<tt class="descname">todict</tt><big>(</big><em>exclude_cache=False</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.todict" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of serialised scalar field for pickling.
If the <em>exclude_cache</em> flag is <tt class="xref docutils literal"><span class="pre">True</span></tt>, fields with <a class="reference internal" href="fields.html#stdnet.odm.Field.as_cache" title="stdnet.odm.Field.as_cache"><tt class="xref py py-attr docutils literal"><span class="pre">Field.as_cache</span></tt></a>
attribute set to <tt class="xref docutils literal"><span class="pre">True</span></tt> will be excluded.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.tojson">
<tt class="descname">tojson</tt><big>(</big><em>exclude_cache=True</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.tojson" title="Permalink to this definition">¶</a></dt>
<dd><p>return a JSON serializable dictionary representation.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.StdModel.load_fields">
<tt class="descname">load_fields</tt><big>(</big><em>*fields</em><big>)</big><a class="headerlink" href="#stdnet.odm.StdModel.load_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Load extra fields to this <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="data-server-metaclass">
<span id="database-metaclass"></span><h3>Data Server Metaclass<a class="headerlink" href="#data-server-metaclass" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Metaclass">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Metaclass</tt><big>(</big><em>model</em>, <em>fields</em>, <em>abstract=False</em>, <em>app_label=''</em>, <em>verbose_name=None</em>, <em>ordering=None</em>, <em>modelkey=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Metaclass" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of <a class="reference internal" href="#stdnet.odm.Metaclass" title="stdnet.odm.Metaclass"><tt class="xref py py-class docutils literal"><span class="pre">Metaclass</span></tt></a> stores all information
which maps a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> into an object in the in a remote
<a class="reference internal" href="backends.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a>.
An instance is initiated by the odm when a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> class is created.</p>
<p>To override default behaviour you can specify the <tt class="docutils literal"><span class="pre">Meta</span></tt> class as an inner
class of <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> in the following way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">stdnet</span> <span class="kn">import</span> <span class="n">odm</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">StdModel</span><span class="p">):</span>
    <span class="n">timestamp</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>
    <span class="o">...</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="s">&#39;-timestamp&#39;</span>
        <span class="n">modelkey</span> <span class="o">=</span> <span class="s">&#39;custom&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>abstract</strong> &#8211; Check the <a class="reference internal" href="#stdnet.odm.Metaclass.abstract" title="stdnet.odm.Metaclass.abstract"><tt class="xref py py-attr docutils literal"><span class="pre">abstract</span></tt></a> attribute.</li>
<li><strong>ordering</strong> &#8211; Check the <a class="reference internal" href="#stdnet.odm.Metaclass.ordering" title="stdnet.odm.Metaclass.ordering"><tt class="xref py py-attr docutils literal"><span class="pre">ordering</span></tt></a> attribute.</li>
<li><strong>app_label</strong> &#8211; Check the <a class="reference internal" href="#stdnet.odm.Metaclass.app_label" title="stdnet.odm.Metaclass.app_label"><tt class="xref py py-attr docutils literal"><span class="pre">app_label</span></tt></a> attribute.</li>
<li><strong>modelkey</strong> &#8211; Check the <a class="reference internal" href="#stdnet.odm.Metaclass.modelkey" title="stdnet.odm.Metaclass.modelkey"><tt class="xref py py-attr docutils literal"><span class="pre">modelkey</span></tt></a> attribute.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Attributes and methods</strong>:</p>
<p>This is the list of attributes and methods available. All attributes,
but the ones mantioned above, are initialized by the object relational
mapper.</p>
<dl class="attribute">
<dt id="stdnet.odm.Metaclass.abstract">
<tt class="descname">abstract</tt><a class="headerlink" href="#stdnet.odm.Metaclass.abstract" title="Permalink to this definition">¶</a></dt>
<dd><p>If <tt class="xref docutils literal"><span class="pre">True</span></tt>, it represents an abstract model and no database elements
are created.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Metaclass.app_label">
<tt class="descname">app_label</tt><a class="headerlink" href="#stdnet.odm.Metaclass.app_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Unless specified it is the name of the directory or file
(if at top level) containing the <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> definition.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Metaclass.model">
<tt class="descname">model</tt><a class="headerlink" href="#stdnet.odm.Metaclass.model" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> represented by the <a class="reference internal" href="#stdnet.odm.Metaclass" title="stdnet.odm.Metaclass"><tt class="xref py py-class docutils literal"><span class="pre">Metaclass</span></tt></a>.
This attribute is set by the <tt class="docutils literal"><span class="pre">odm</span></tt> during class initialization.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Metaclass.ordering">
<tt class="descname">ordering</tt><a class="headerlink" href="#stdnet.odm.Metaclass.ordering" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional name of a <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> in the <a class="reference internal" href="#stdnet.odm.Metaclass.model" title="stdnet.odm.Metaclass.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a>.
If provided, model indices will be sorted with respect to the value of the
specified field. It can also be a <a class="reference internal" href="#stdnet.odm.autoincrement" title="stdnet.odm.autoincrement"><tt class="xref py py-class docutils literal"><span class="pre">autoincrement</span></tt></a> instance.
Check the <a class="reference internal" href="../examples/sorting.html#sorting"><em>sorting</em></a> documentation for more details.</p>
<p>Default: <tt class="xref docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Metaclass.dfields">
<tt class="descname">dfields</tt><a class="headerlink" href="#stdnet.odm.Metaclass.dfields" title="Permalink to this definition">¶</a></dt>
<dd><p>dictionary of <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> instances.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Metaclass.fields">
<tt class="descname">fields</tt><a class="headerlink" href="#stdnet.odm.Metaclass.fields" title="Permalink to this definition">¶</a></dt>
<dd><p>list of all <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> instances.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Metaclass.indices">
<tt class="descname">indices</tt><a class="headerlink" href="#stdnet.odm.Metaclass.indices" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> which are indices (<a class="reference internal" href="fields.html#stdnet.odm.Field.index" title="stdnet.odm.Field.index"><tt class="xref py py-attr docutils literal"><span class="pre">Field.index</span></tt></a> attribute
set to <tt class="xref docutils literal"><span class="pre">True</span></tt>).</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Metaclass.modelkey">
<tt class="descname">modelkey</tt><a class="headerlink" href="#stdnet.odm.Metaclass.modelkey" title="Permalink to this definition">¶</a></dt>
<dd><p>Override the modelkey which is by default given by <tt class="docutils literal"><span class="pre">app_label.name</span></tt></p>
<p>Default <tt class="xref docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Metaclass.pk">
<tt class="descname">pk</tt><a class="headerlink" href="#stdnet.odm.Metaclass.pk" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> representing the primary key.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Metaclass.is_valid">
<tt class="descname">is_valid</tt><big>(</big><em>instance</em><big>)</big><a class="headerlink" href="#stdnet.odm.Metaclass.is_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform validation for <em>instance</em> and stores serialized data,
indexes and errors into local cache.
Return <tt class="xref docutils literal"><span class="pre">True</span></tt> if the instance is ready to be saved to database.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Metaclass.backend_fields">
<tt class="descname">backend_fields</tt><big>(</big><em>fields</em><big>)</big><a class="headerlink" href="#stdnet.odm.Metaclass.backend_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a two elements tuple containing a list
of fields names and a list of field attribute names.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Metaclass.as_dict">
<tt class="descname">as_dict</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Metaclass.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Model metadata in a dictionary</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id1">
<h3>Model<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Model">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Model</tt><a class="headerlink" href="#stdnet.odm.Model" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the base class for both <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> and <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a>
classes. It implements the <a class="reference internal" href="#stdnet.odm.Model.uuid" title="stdnet.odm.Model.uuid"><tt class="xref py py-attr docutils literal"><span class="pre">uuid</span></tt></a> attribute which provides the universal
unique identifier for an instance of a model.</p>
<dl class="attribute">
<dt id="stdnet.odm.Model.DoesNotExist">
<tt class="descname">DoesNotExist</tt><a class="headerlink" href="#stdnet.odm.Model.DoesNotExist" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception raised when an instance of a model does not exist.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Model.DoesNotValidate">
<tt class="descname">DoesNotValidate</tt><a class="headerlink" href="#stdnet.odm.Model.DoesNotValidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception raised when an instance of a model does not validate. Usually
raised when trying to save an invalid instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Model.uuid">
<tt class="descname">uuid</tt><a class="headerlink" href="#stdnet.odm.Model.uuid" title="Permalink to this definition">¶</a></dt>
<dd><p>Universally unique identifier for an instance of a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Model.save">
<tt class="descname">save</tt><big>(</big><em>use_current_session=True</em><big>)</big><a class="headerlink" href="#stdnet.odm.Model.save" title="Permalink to this definition">¶</a></dt>
<dd><p>A direct method for saving an object. This method is provided for
convenience and should not be used when using a <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a>.
This method always commit changes immediately and if the <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>
has already started a <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> an error will occur.
If a session is not available, it tries to create one
from its <a class="reference internal" href="#stdnet.odm.Manager" title="stdnet.odm.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Model.force_save">
<tt class="descname">force_save</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Model.force_save" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as the <a class="reference internal" href="#stdnet.odm.Model.save" title="stdnet.odm.Model.save"><tt class="xref py py-meth docutils literal"><span class="pre">save()</span></tt></a> method, however this method never
uses the current session. Instead it creates a new one for immediate commit.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Model.force_delete">
<tt class="descname">force_delete</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Model.force_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as the <tt class="xref py py-meth docutils literal"><span class="pre">delete()</span></tt> method, however this method never
uses the current session. Instead it creates a new one for immediate commit.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="autoincrement">
<h3>autoincrement<a class="headerlink" href="#autoincrement" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.autoincrement">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">autoincrement</tt><big>(</big><em>incrby=1</em>, <em>desc=False</em><big>)</big><a class="headerlink" href="#stdnet.odm.autoincrement" title="Permalink to this definition">¶</a></dt>
<dd><p>An <a class="reference internal" href="#stdnet.odm.autoincrement" title="stdnet.odm.autoincrement"><tt class="xref py py-class docutils literal"><span class="pre">autoincrement</span></tt></a> is used in a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> Meta
class to specify a model with <a class="reference internal" href="../examples/sorting.html#incremental-sorting"><em>incremental sorting</em></a>.</p>
<dl class="attribute">
<dt id="stdnet.odm.autoincrement.incrby">
<tt class="descname">incrby</tt><a class="headerlink" href="#stdnet.odm.autoincrement.incrby" title="Permalink to this definition">¶</a></dt>
<dd><p>The amount to increment the score by when a duplicate element is saved.</p>
<p>Default: 1.</p>
</dd></dl>

<p>For example, the <tt class="xref py py-class docutils literal"><span class="pre">stdnet.apps.searchengine.Word</span></tt> model is defined as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Word</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">StdModel</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">SymbolField</span><span class="p">(</span><span class="n">primary_key</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">ordering</span> <span class="o">=</span> <span class="o">-</span><span class="n">autoincrement</span><span class="p">()</span>
</pre></div>
</div>
<p>This means every time we save a new instance of Word, and that instance has
an id already available, the score of that word is incremented by the
<a class="reference internal" href="#stdnet.odm.autoincrement.incrby" title="stdnet.odm.autoincrement.incrby"><tt class="xref py py-attr docutils literal"><span class="pre">incrby</span></tt></a> attribute.</p>
</dd></dl>

</div>
</div>
<div class="section" id="queries">
<h2>Queries<a class="headerlink" href="#queries" title="Permalink to this headline">¶</a></h2>
<div class="section" id="query-base-class">
<h3>Query base class<a class="headerlink" href="#query-base-class" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Q">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Q</tt><big>(</big><em>meta</em>, <em>session</em>, <em>select_related=None</em>, <em>ordering=None</em>, <em>fields=None</em>, <em>get_field=None</em>, <em>name=None</em>, <em>keyword=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Q" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> and <a class="reference internal" href="#stdnet.odm.QueryElement" title="stdnet.odm.QueryElement"><tt class="xref py py-class docutils literal"><span class="pre">QueryElement</span></tt></a>.</p>
<dl class="attribute">
<dt id="stdnet.odm.Q.meta">
<tt class="descname">meta</tt><a class="headerlink" href="#stdnet.odm.Q.meta" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#stdnet.odm.StdModel._meta" title="stdnet.odm.StdModel._meta"><tt class="xref py py-attr docutils literal"><span class="pre">StdModel._meta</span></tt></a> attribute.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Q.model">
<tt class="descname">model</tt><a class="headerlink" href="#stdnet.odm.Q.model" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> class for this query.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Q.get_field">
<tt class="descname">get_field</tt><big>(</big><em>field</em><big>)</big><a class="headerlink" href="#stdnet.odm.Q.get_field" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.Q" title="stdnet.odm.Q"><tt class="xref py py-class docutils literal"><span class="pre">Q</span></tt></a> performs a series of operations and ultimately
generate of set of matched elements <tt class="docutils literal"><span class="pre">ids</span></tt>. If on the other hand, a
different field is required, it can be specified with the <a class="reference internal" href="#stdnet.odm.Q.get_field" title="stdnet.odm.Q.get_field"><tt class="xref py py-meth docutils literal"><span class="pre">get_field()</span></tt></a>
method. For example, lets say a model has a field called <tt class="docutils literal"><span class="pre">object_id</span></tt>
which contains ids of another model, we could use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s">&#39;object_id&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>to obtain a set containing the values of matched elements <tt class="docutils literal"><span class="pre">object_id</span></tt>
fields.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>field</strong> &#8211; the name of the field which will be used to obtained the
matched elements value. Must be an index.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a new <a class="reference internal" href="#stdnet.odm.Q" title="stdnet.odm.Q"><tt class="xref py py-class docutils literal"><span class="pre">Q</span></tt></a> instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Q.backend_query">
<tt class="descname">backend_query</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Q.backend_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the <a class="reference internal" href="backends.html#stdnet.BackendQuery" title="stdnet.BackendQuery"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendQuery</span></tt></a> for this instance. This
is a virtual method with different implementation in <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>
and <a class="reference internal" href="#stdnet.odm.QueryElement" title="stdnet.odm.QueryElement"><tt class="xref py py-class docutils literal"><span class="pre">QueryElement</span></tt></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="query">
<span id="model-query"></span><h3>Query<a class="headerlink" href="#query" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Query">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Query</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> is produced in terms of a given <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>,
using the <a class="reference internal" href="#stdnet.odm.Session.query" title="stdnet.odm.Session.query"><tt class="xref py py-meth docutils literal"><span class="pre">Session.query()</span></tt></a> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
</pre></div>
</div>
<p>A query is equivalent to a collection of SELECT statements for a standard
relational database. It has a  a generative interface whereby successive calls
return a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> object, a copy of the former with additional
criteria and options associated with it.</p>
<p><strong>ATTRIBUTES</strong></p>
<dl class="attribute">
<dt id="stdnet.odm.Query._meta">
<tt class="descname">_meta</tt><a class="headerlink" href="#stdnet.odm.Query._meta" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#stdnet.odm.StdModel._meta" title="stdnet.odm.StdModel._meta"><tt class="xref py py-attr docutils literal"><span class="pre">StdModel._meta</span></tt></a> attribute.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query.model">
<tt class="descname">model</tt><a class="headerlink" href="#stdnet.odm.Query.model" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> class for this query.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query.session">
<tt class="descname">session</tt><a class="headerlink" href="#stdnet.odm.Query.session" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> which created the <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> via the
<a class="reference internal" href="#stdnet.odm.Session.query" title="stdnet.odm.Session.query"><tt class="xref py py-meth docutils literal"><span class="pre">Session.query()</span></tt></a> method.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query.backend">
<tt class="descname">backend</tt><a class="headerlink" href="#stdnet.odm.Query.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="backends.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a> holding the data to query.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query._get_field">
<tt class="descname">_get_field</tt><a class="headerlink" href="#stdnet.odm.Query._get_field" title="Permalink to this definition">¶</a></dt>
<dd><p>When iterating over a <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>, you get back instances of
the <a class="reference internal" href="#stdnet.odm.Query.model" title="stdnet.odm.Query.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a> class. However, if <tt class="docutils literal"><span class="pre">_get_field</span></tt> is specified
you get back values of the field specified.
This can be changed via the <tt class="xref py py-meth docutils literal"><span class="pre">get_field()</span></tt> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qs</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">get_field</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>
</div>
<p>the results is a list of name values (provided the model has a
<tt class="docutils literal"><span class="pre">name</span></tt> field of course).</p>
<p>Default: <tt class="xref docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query.fargs">
<tt class="descname">fargs</tt><a class="headerlink" href="#stdnet.odm.Query.fargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary containing the <tt class="docutils literal"><span class="pre">filter</span></tt> lookup parameters each one of
them corresponding to a <tt class="docutils literal"><span class="pre">where</span></tt> clause of a select. This value is
manipulated via the <a class="reference internal" href="#stdnet.odm.Query.filter" title="stdnet.odm.Query.filter"><tt class="xref py py-meth docutils literal"><span class="pre">filter()</span></tt></a> method.</p>
<p>Default: <tt class="docutils literal"><span class="pre">{}</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query.eargs">
<tt class="descname">eargs</tt><a class="headerlink" href="#stdnet.odm.Query.eargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary containing the <tt class="docutils literal"><span class="pre">exclude</span></tt> lookup parameters each one
of them corresponding to a <tt class="docutils literal"><span class="pre">where</span></tt> clause of a select. This value is
manipulated via the <a class="reference internal" href="#stdnet.odm.Query.exclude" title="stdnet.odm.Query.exclude"><tt class="xref py py-meth docutils literal"><span class="pre">exclude()</span></tt></a> method.</p>
<p>Default: <tt class="docutils literal"><span class="pre">{}</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query.ordering">
<tt class="descname">ordering</tt><a class="headerlink" href="#stdnet.odm.Query.ordering" title="Permalink to this definition">¶</a></dt>
<dd><p>optional ordering field.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Query.text">
<tt class="descname">text</tt><a class="headerlink" href="#stdnet.odm.Query.text" title="Permalink to this definition">¶</a></dt>
<dd><p>optional text to filter result on.</p>
<p>Default: <tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt>.</p>
</dd></dl>

<p><strong>METHODS</strong></p>
<dl class="method">
<dt id="stdnet.odm.Query.__init__">
<tt class="descname">__init__</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> is not initialized directly but via the
<a class="reference internal" href="#stdnet.odm.Session.query" title="stdnet.odm.Session.query"><tt class="xref py py-meth docutils literal"><span class="pre">Session.query()</span></tt></a> or <a class="reference internal" href="#stdnet.odm.Manager.query" title="stdnet.odm.Manager.query"><tt class="xref py py-meth docutils literal"><span class="pre">Manager.query()</span></tt></a> methods.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.filter">
<tt class="descname">filter</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> with additional clauses corresponding to
<tt class="docutils literal"><span class="pre">where</span></tt> or <tt class="docutils literal"><span class="pre">limit</span></tt> in a <tt class="docutils literal"><span class="pre">SQL</span> <span class="pre">SELECT</span></tt> statement.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; dictionary of limiting clauses.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> instance.</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">qs</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">group</span> <span class="o">=</span> <span class="s">&#39;planet&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.exclude">
<tt class="descname">exclude</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.exclude" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> with additional clauses corresponding
to <tt class="docutils literal"><span class="pre">EXCEPT</span></tt> in a <tt class="docutils literal"><span class="pre">SQL</span> <span class="pre">SELECT</span></tt> statement.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> &#8211; dictionary of limiting clauses.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> instance.</td>
</tr>
</tbody>
</table>
<p>Using an equivalent example to the <a class="reference internal" href="#stdnet.odm.Query.filter" title="stdnet.odm.Query.filter"><tt class="xref py py-meth docutils literal"><span class="pre">filter()</span></tt></a> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qs</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
<span class="n">result1</span> <span class="o">=</span> <span class="n">qs</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">group</span> <span class="o">=</span> <span class="s">&#39;planet&#39;</span><span class="p">)</span>
<span class="n">result2</span> <span class="o">=</span> <span class="n">qs</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">group__in</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;planet&#39;</span><span class="p">,</span><span class="s">&#39;stars&#39;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.union">
<tt class="descname">union</tt><big>(</big><em>*queries</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.union" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> obtained form the union of this
<a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> with one or more <em>queries</em>.
For example, lets say we want to have the union
of two queries obtained from the <a class="reference internal" href="#stdnet.odm.Query.filter" title="stdnet.odm.Query.filter"><tt class="xref py py-meth docutils literal"><span class="pre">filter()</span></tt></a> method:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">query</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">MyModel</span><span class="p">)</span>
<span class="n">qs</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">field1</span> <span class="o">=</span> <span class="s">&#39;bla&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">field2</span> <span class="o">=</span> <span class="s">&#39;foo&#39;</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.intersect">
<tt class="descname">intersect</tt><big>(</big><em>*queries</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.intersect" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> obtained form the intersection of this
<a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> with one or more <em>queries</em>. Workds the same way as
the <a class="reference internal" href="#stdnet.odm.Query.union" title="stdnet.odm.Query.union"><tt class="xref py py-meth docutils literal"><span class="pre">union()</span></tt></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.sort_by">
<tt class="descname">sort_by</tt><big>(</big><em>ordering</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.sort_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort the query by the given field</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ordering</strong> &#8211; a string indicating the class:<cite>Field</cite> name to sort by.
If prefixed with <tt class="docutils literal"><span class="pre">-</span></tt>, the sorting will be in descending order, otherwise
in ascending order.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.search">
<tt class="descname">search</tt><big>(</big><em>text</em>, <em>lookup=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Search <em>text</em> in model. A search engine needs to be installed
for this function to be available.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>text</strong> &#8211; a string to search.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.search_queries">
<tt class="descname">search_queries</tt><big>(</big><em>q</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.search_queries" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a new <tt class="xref py py-class docutils literal"><span class="pre">QueryElem</span></tt> for <em>q</em> applying a text search.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.load_related">
<tt class="descname">load_related</tt><big>(</big><em>related</em>, <em>*related_fields</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.load_related" title="Permalink to this definition">¶</a></dt>
<dd><p>It returns a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> that automatically
follows the foreign-key relationship <em>related</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>related</strong> &#8211; A field name corresponding to a <a class="reference internal" href="fields.html#stdnet.odm.ForeignKey" title="stdnet.odm.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a>
in <a class="reference internal" href="#stdnet.odm.Query.model" title="stdnet.odm.Query.model"><tt class="xref py py-attr docutils literal"><span class="pre">Query.model</span></tt></a>.</li>
<li><strong>fields</strong> &#8211; optional <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> names for the <em>related</em>
model to load. If not provided, all fields will be loaded.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This function is <a class="reference internal" href="../examples/performance.html#increase-performance"><em>performance boost</em></a> when
accessing the related fields of all (most) objects in your query.</p>
<p>If Your model contains more than one foreign key, you can use this function
in a generative way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">qs</span> <span class="o">=</span> <span class="n">myquery</span><span class="o">.</span><span class="n">load_related</span><span class="p">(</span><span class="s">&#39;rel1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">load_related</span><span class="p">(</span><span class="s">&#39;rel2&#39;</span><span class="p">,</span><span class="s">&#39;field1&#39;</span><span class="p">,</span><span class="s">&#39;field2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.load_only">
<tt class="descname">load_only</tt><big>(</big><em>*fields</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.load_only" title="Permalink to this definition">¶</a></dt>
<dd><p>This is provides a <a class="reference internal" href="../examples/performance.html#increase-performance"><em>performance boost</em></a>
in cases when you need to load a subset of fields of your model. The boost
achieved is less than the one obtained when using
<a class="reference internal" href="#stdnet.odm.Query.load_related" title="stdnet.odm.Query.load_related"><tt class="xref py py-meth docutils literal"><span class="pre">Query.load_related()</span></tt></a>, since it does not reduce the number of requests
to the database. However, it can save you lots of bandwidth when excluding
data intensive fields you don&#8217;t need.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.dont_load">
<tt class="descname">dont_load</tt><big>(</big><em>*fields</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.dont_load" title="Permalink to this definition">¶</a></dt>
<dd><p>Works like <a class="reference internal" href="#stdnet.odm.Query.load_only" title="stdnet.odm.Query.load_only"><tt class="xref py py-meth docutils literal"><span class="pre">load_only()</span></tt></a> to provides a
<a class="reference internal" href="../examples/performance.html#increase-performance"><em>performance boost</em></a> in cases when you need
to load all fields except a subset specified by <em>fields</em>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.get">
<tt class="descname">get</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance of a model matching the query. A special case is
the query on <tt class="docutils literal"><span class="pre">id</span></tt> which provides a direct access to the <a class="reference internal" href="#stdnet.odm.Query.session" title="stdnet.odm.Query.session"><tt class="xref py py-attr docutils literal"><span class="pre">session</span></tt></a>
instances. If the given primary key is present in the session, the object
is returned directly without performing any query.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.count">
<tt class="descname">count</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Query.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of objects in <tt class="docutils literal"><span class="pre">self</span></tt>.
This method is efficient since the <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> does not
receive any data from the server apart from the number of matched elements.
It construct the queries and count the
objects on the server side.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.delete">
<tt class="descname">delete</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Query.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all matched elements of the <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>. It returns the
list of ids deleted.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.construct">
<tt class="descname">construct</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Query.construct" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the <a class="reference internal" href="#stdnet.odm.QueryElement" title="stdnet.odm.QueryElement"><tt class="xref py py-class docutils literal"><span class="pre">QueryElement</span></tt></a> representing this query.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.backend_query">
<tt class="descname">backend_query</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.backend_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Build and return the <a class="reference internal" href="backends.html#stdnet.BackendQuery" title="stdnet.BackendQuery"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendQuery</span></tt></a>.
This is a lazy method in the sense that it is evaluated once only and its
result stored for future retrieval.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.test_unique">
<tt class="descname">test_unique</tt><big>(</big><em>fieldname</em>, <em>value</em>, <em>instance=None</em>, <em>exception=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.test_unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Test if a given field <em>fieldname</em> has a unique <em>value</em>
in <a class="reference internal" href="#stdnet.odm.Query.model" title="stdnet.odm.Query.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a>. The field must be an index of the model.
If the field value is not unique and the <em>instance</em> is not the same
an exception is raised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fieldname</strong> &#8211; <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> name to test</li>
<li><strong>vale</strong> &#8211; <a class="reference internal" href="fields.html#stdnet.odm.Field" title="stdnet.odm.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a> value</li>
<li><strong>instance</strong> &#8211; optional instance of <a class="reference internal" href="#stdnet.odm.Query.model" title="stdnet.odm.Query.model"><tt class="xref py py-attr docutils literal"><span class="pre">model</span></tt></a></li>
<li><strong>exception</strong> &#8211; optional exception class to raise if the test fails.
Default: <tt class="xref py py-attr docutils literal"><span class="pre">ModelMixin.DoesNotValidate</span></tt>.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>value</em></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.aggregate">
<tt class="descname">aggregate</tt><big>(</big><em>kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.aggregate" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregate lookup parameters.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Query.items">
<tt class="descname">items</tt><big>(</big><em>slic=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Query.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch data matching theis <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> and return a list
of instances of models.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="queryelement">
<h3>QueryElement<a class="headerlink" href="#queryelement" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.QueryElement">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">QueryElement</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.QueryElement" title="Permalink to this definition">¶</a></dt>
<dd><p>An element of a <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</p>
<dl class="attribute">
<dt id="stdnet.odm.QueryElement.qs">
<tt class="descname">qs</tt><a class="headerlink" href="#stdnet.odm.QueryElement.qs" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> which contains this <a class="reference internal" href="#stdnet.odm.QueryElement" title="stdnet.odm.QueryElement"><tt class="xref py py-class docutils literal"><span class="pre">QueryElement</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.QueryElement.underlying">
<tt class="descname">underlying</tt><a class="headerlink" href="#stdnet.odm.QueryElement.underlying" title="Permalink to this definition">¶</a></dt>
<dd><p>the element contained in the <a class="reference internal" href="#stdnet.odm.QueryElement" title="stdnet.odm.QueryElement"><tt class="xref py py-class docutils literal"><span class="pre">QueryElement</span></tt></a>. This underlying is
an iterable or another <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.QueryElement.valid">
<tt class="descname">valid</tt><a class="headerlink" href="#stdnet.odm.QueryElement.valid" title="Permalink to this definition">¶</a></dt>
<dd><p>if <tt class="xref docutils literal"><span class="pre">False</span></tt> this <a class="reference internal" href="#stdnet.odm.QueryElement" title="stdnet.odm.QueryElement"><tt class="xref py py-class docutils literal"><span class="pre">QueryElement</span></tt></a> has no underlying elements and
won&#8217;t produce any query.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="searchengine-interface">
<h3>SearchEngine Interface<a class="headerlink" href="#searchengine-interface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.SearchEngine">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">SearchEngine</tt><a class="headerlink" href="#stdnet.odm.SearchEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>Stdnet search engine driver. This is an abstract class which
expose the base functionalities for full text-search on model instances.
Stdnet also provides a <a class="reference internal" href="../apps/searchengine.html#apps-searchengine"><em>python implementation</em></a>
of this interface.</p>
<p>The main methods to be implemented are <a class="reference internal" href="#stdnet.odm.SearchEngine.add_item" title="stdnet.odm.SearchEngine.add_item"><tt class="xref py py-meth docutils literal"><span class="pre">add_item()</span></tt></a>,
<tt class="xref py py-meth docutils literal"><span class="pre">remove_index()</span></tt> and <a class="reference internal" href="#stdnet.odm.SearchEngine.search_model" title="stdnet.odm.SearchEngine.search_model"><tt class="xref py py-meth docutils literal"><span class="pre">search_model()</span></tt></a>.</p>
<dl class="attribute">
<dt id="stdnet.odm.SearchEngine.word_middleware">
<tt class="descname">word_middleware</tt><a class="headerlink" href="#stdnet.odm.SearchEngine.word_middleware" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of middleware functions for preprocessing text
to be indexed. A middleware function has arity 1 by
accepting an iterable of words and
returning an iterable of words. Word middleware functions
are added to the search engine via the
<a class="reference internal" href="#stdnet.odm.SearchEngine.add_word_middleware" title="stdnet.odm.SearchEngine.add_word_middleware"><tt class="xref py py-meth docutils literal"><span class="pre">add_word_middleware()</span></tt></a> method.</p>
<p>For example this function remove a group of words from the index:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">se</span> <span class="o">=</span> <span class="n">SearchEngine</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">stopwords</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">swords</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">swords</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">swords</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">words</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">swords</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">word</span>

<span class="n">se</span><span class="o">.</span><span class="n">add_word_middleware</span><span class="p">(</span><span class="n">stopwords</span><span class="p">(</span><span class="s">&#39;and&#39;</span><span class="p">,</span><span class="s">&#39;or&#39;</span><span class="p">,</span><span class="s">&#39;this&#39;</span><span class="p">,</span><span class="s">&#39;that&#39;</span><span class="p">,</span><span class="o">...</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.register">
<tt class="descname">register</tt><big>(</big><em>model</em>, <em>related=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> to the search engine.
When registering a model, every time an instance is created, it will be
indexed by the search engine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>model</strong> &#8211; a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> class.</li>
<li><strong>related</strong> &#8211; a list of related fields to include in the index.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.words_from_text">
<tt class="descname">words_from_text</tt><big>(</big><em>text</em>, <em>for_search=False</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.words_from_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator of indexable words in <em>text</em>.
This functions loop through the <a class="reference internal" href="#stdnet.odm.SearchEngine.word_middleware" title="stdnet.odm.SearchEngine.word_middleware"><tt class="xref py py-attr docutils literal"><span class="pre">word_middleware</span></tt></a> attribute
to process the text.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>text</strong> &#8211; string from which to extract words.</li>
<li><strong>for_search</strong> &#8211; <p>flag indicating if the the words will be used for search
or to index the database. This flug is used in conjunction with the
middleware flag <em>for_search</em>. If this flag is <tt class="xref docutils literal"><span class="pre">True</span></tt> (i.e. we need to
search the database for the words in <em>text</em>), only the
middleware functions in <a class="reference internal" href="#stdnet.odm.SearchEngine.word_middleware" title="stdnet.odm.SearchEngine.word_middleware"><tt class="xref py py-attr docutils literal"><span class="pre">word_middleware</span></tt></a> enabled for searching are
used.</p>
<p>Default: <tt class="xref docutils literal"><span class="pre">False</span></tt>.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>return a <em>list</em> of cleaned words.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.split_text">
<tt class="descname">split_text</tt><big>(</big><em>text</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.split_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Split text into words and return an iterable over them.
Can and should be reimplemented by subclasses.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.add_word_middleware">
<tt class="descname">add_word_middleware</tt><big>(</big><em>middleware</em>, <em>for_search=True</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.add_word_middleware" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <em>middleware</em> function to the list of <a class="reference internal" href="#stdnet.odm.SearchEngine.word_middleware" title="stdnet.odm.SearchEngine.word_middleware"><tt class="xref py py-attr docutils literal"><span class="pre">word_middleware</span></tt></a>,
for preprocessing words to be indexed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>middleware</strong> &#8211; a callable receving an iterable over words.</li>
<li><strong>for_search</strong> &#8211; flag indicating if the <em>middleware</em> can be used for the
text to search. Default: <tt class="xref docutils literal"><span class="pre">True</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.index_item">
<tt class="descname">index_item</tt><big>(</big><em>item</em>, <em>transaction</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.index_item" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the main function for indexing items.
It extracts content from the given <em>item</em> and add it to the index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>item</strong> &#8211; an instance of a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.odm.StdModel</span></tt></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.index_items_from_model">
<tt class="descname">index_items_from_model</tt><big>(</big><em>items</em>, <em>model</em>, <em>transaction</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.index_items_from_model" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the main function for indexing items.
It extracts content from a list of <em>items</em> belonging to <em>model</em> and
add it to the index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>items</strong> &#8211; an iterable over instances of of a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.odm.StdModel</span></tt></a>.</li>
<li><strong>model</strong> &#8211; The <em>model</em> of all <em>items</em>.</li>
<li><strong>transaction</strong> &#8211; A transaction for updauing indexes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.reindex">
<tt class="descname">reindex</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.reindex" title="Permalink to this definition">¶</a></dt>
<dd><p>Re-index models by removing items in
<tt class="xref py py-class docutils literal"><span class="pre">stdnet.contrib.searchengine.WordItem</span></tt> and rebuilding them by iterating
through all the instances of model provided.
If models are not provided, it reindex all models registered
with the search engine.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.session">
<tt class="descname">session</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.session" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a session for the search engine</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.remove_item">
<tt class="descname">remove_item</tt><big>(</big><em>item_or_model</em>, <em>session</em>, <em>ids=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.remove_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove an item from the search indices</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.add_item">
<tt class="descname">add_item</tt><big>(</big><em>item</em>, <em>words</em>, <em>session</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.add_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Create indices for <em>item</em> and each word in <em>words</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>item</strong> &#8211; a <em>model</em> instance to be indexed. It does not need to be
a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.odm.StdModel</span></tt></a>.</li>
<li><strong>words</strong> &#8211; iterable over words. This iterable has been obtained from the
text in <em>item</em> via the <a class="reference internal" href="#stdnet.odm.SearchEngine.word_middleware" title="stdnet.odm.SearchEngine.word_middleware"><tt class="xref py py-attr docutils literal"><span class="pre">word_middleware</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.search_model">
<tt class="descname">search_model</tt><big>(</big><em>query</em>, <em>text</em>, <em>lookup=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.search_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Search <em>text</em> in <em>model</em> instances. This is the functions
needing implementation by custom serach engines.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>query</strong> &#8211; a <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> on a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a>.</li>
<li><strong>text</strong> &#8211; text to search</li>
<li><strong>lookup</strong> &#8211; Optional lookup, one of <tt class="docutils literal"><span class="pre">contains</span></tt> or <tt class="docutils literal"><span class="pre">in</span></tt>.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">An updated <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SearchEngine.flush">
<tt class="descname">flush</tt><big>(</big><em>full=False</em><big>)</big><a class="headerlink" href="#stdnet.odm.SearchEngine.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean the search engine</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="data-structures">
<span id="model-structures"></span><h2>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h2>
<p>Data structures are fundamental constructs around which you build your application.
They are used in almost all computer programs, therefore becoming fluent in what the standard
data-structures can do for you is essential to get full value out of them.
The <a class="reference external" href="http://www.sgi.com/tech/stl/">standard template library</a> in C++ implements a wide array of structures,
python has several of them too. <tt class="docutils literal"><span class="pre">stdnet</span></tt> implements <strong>six</strong> remote structures:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#stdnet.odm.List" title="stdnet.odm.List"><tt class="xref py py-class docutils literal"><span class="pre">List</span></tt></a>, implemented as a doubly-linked sequence.</li>
<li><a class="reference internal" href="#stdnet.odm.Set" title="stdnet.odm.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a>, a container of unique values.</li>
<li><a class="reference internal" href="#stdnet.odm.HashTable" title="stdnet.odm.HashTable"><tt class="xref py py-class docutils literal"><span class="pre">HashTable</span></tt></a>, unique associative container.</li>
<li><a class="reference internal" href="#stdnet.odm.Zset" title="stdnet.odm.Zset"><tt class="xref py py-class docutils literal"><span class="pre">Zset</span></tt></a>, an ordered container of unique values.</li>
<li><a class="reference internal" href="#stdnet.odm.TS" title="stdnet.odm.TS"><tt class="xref py py-class docutils literal"><span class="pre">TS</span></tt></a>, a timeseries implemented as a ordered unique associative container.</li>
</ul>
</div></blockquote>
<p>An additional structure is provided in the <a class="reference internal" href="../apps/timeseries.html#module-stdnet.apps.columnts" title="stdnet.apps.columnts"><tt class="xref py py-mod docutils literal"><span class="pre">stdnet.apps.columnts</span></tt></a> module</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="../apps/timeseries.html#stdnet.apps.columnts.ColumnTS" title="stdnet.apps.columnts.ColumnTS"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.apps.columnts.ColumnTS</span></tt></a> a numeric multivariate timeseries structure
(useful for modelling financial timeseries for example).</li>
</ul>
</div></blockquote>
<p>The structures are bind to a remote dataserver and they derive from
from <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a> base class.</p>
<div class="section" id="creating-structures">
<h3>Creating Structures<a class="headerlink" href="#creating-structures" title="Permalink to this headline">¶</a></h3>
<p>Creating the five structures available in stdnet is accomplished
in the following way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stdnet</span> <span class="kn">import</span> <span class="n">odm</span>

<span class="n">session</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">List</span><span class="p">())</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">Set</span><span class="p">())</span>
<span class="n">o</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">Zset</span><span class="p">())</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">HashTable</span><span class="p">())</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">TS</span><span class="p">())</span>
</pre></div>
</div>
<p>If no <tt class="docutils literal"><span class="pre">id</span></tt> is specified, stdnet will create one for you:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">l</span><span class="o">.</span><span class="n">id</span>
<span class="go">&#39;2d0cbac9&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>To add data you have two options: immediate commit or transactions. For example,
lets add elements to a set:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">update</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s">&#39;bla&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Alternatively, one could use <a class="reference internal" href="../examples/performance.html#model-transactions"><em>transactions</em></a> to
combine several updates together:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">begin</span><span class="p">():</span>
    <span class="n">s</span><span class="o">.</span><span class="n">update</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="s">&#39;bla&#39;</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
    <span class="n">h</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">56</span>
    <span class="n">o</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="s">&#39;a zset element with score 3&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="base-class-and-mixins">
<h3>Base Class and Mixins<a class="headerlink" href="#base-class-and-mixins" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Structure">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Structure</tt><big>(</big><em>instance=None</em>, <em>timeout=0</em>, <em>value_pickler=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Structure" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> which is used a base class for remote data-structures.
Remote structures are the
backend of <a class="reference internal" href="fields.html#model-field-structure"><em>structured fields</em></a> but they
can also be used as stand alone objects. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">stdnet</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">stdnet</span><span class="o">.</span><span class="n">getdb</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">mylist</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="s">&#39;bla&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="stdnet.odm.Structure.instance">
<tt class="descname">instance</tt><a class="headerlink" href="#stdnet.odm.Structure.instance" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> instance to which the structure belongs
to via a <a class="reference internal" href="fields.html#model-field-structure"><em>structured field</em></a>. This attribute
is initialised by the <tt class="xref py py-mod docutils literal"><span class="pre">odm</span></tt>.</p>
<p>Default <tt class="xref docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Structure.timeout">
<tt class="descname">timeout</tt><a class="headerlink" href="#stdnet.odm.Structure.timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Expiry timeout. If different from zero it represents the number of seconds
after which the structure is deleted from the data server.</p>
<p>Default <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Structure.pickler">
<tt class="descname">pickler</tt><a class="headerlink" href="#stdnet.odm.Structure.pickler" title="Permalink to this definition">¶</a></dt>
<dd><p>Class used for serialize and unserialize values.
If <tt class="xref docutils literal"><span class="pre">None</span></tt> the <tt class="xref py py-attr docutils literal"><span class="pre">backend</span></tt> pickler will be used.</p>
<p>Default <tt class="xref docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Structure.size">
<tt class="descname">size</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Structure.size" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of elements in structure.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Structure.set_cache">
<tt class="descname">set_cache</tt><big>(</big><em>data</em><big>)</big><a class="headerlink" href="#stdnet.odm.Structure.set_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the cache for the <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a>.
Do not override this function. Use <a class="reference internal" href="#stdnet.odm.Structure.load_data" title="stdnet.odm.Structure.load_data"><tt class="xref py py-meth docutils literal"><span class="pre">load_data()</span></tt></a> method instead.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Structure.load_data">
<tt class="descname">load_data</tt><big>(</big><em>data</em><big>)</big><a class="headerlink" href="#stdnet.odm.Structure.load_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data from the <a class="reference internal" href="backends.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stdnet.odm.Sequence">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Sequence</tt><a class="headerlink" href="#stdnet.odm.Sequence" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin for a <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a> which implements a kind of sequence
container. The elements in a sequence container are ordered following a linear
sequence.</p>
<dl class="method">
<dt id="stdnet.odm.Sequence.push_back">
<tt class="descname">push_back</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Sequence.push_back" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends a copy of <em>value</em> at the end of the <a class="reference internal" href="#stdnet.odm.Sequence" title="stdnet.odm.Sequence"><tt class="xref py py-class docutils literal"><span class="pre">Sequence</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Sequence.pop_back">
<tt class="descname">pop_back</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Sequence.pop_back" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the last element from the <a class="reference internal" href="#stdnet.odm.Sequence" title="stdnet.odm.Sequence"><tt class="xref py py-class docutils literal"><span class="pre">Sequence</span></tt></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stdnet.odm.PairMixin">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">PairMixin</tt><a class="headerlink" href="#stdnet.odm.PairMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>A mixin for handling structures with which holds pairs.</p>
<dl class="method">
<dt id="stdnet.odm.PairMixin.pair">
<tt class="descname">pair</tt><big>(</big><em>pair</em><big>)</big><a class="headerlink" href="#stdnet.odm.PairMixin.pair" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <em>pair</em> to the structure.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.PairMixin.update">
<tt class="descname">update</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.PairMixin.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Add <em>mapping</em> dictionary to hashtable.
Equivalent to python dictionary update method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>mapping</strong> &#8211; a dictionary of field values.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stdnet.odm.KeyValueMixin">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">KeyValueMixin</tt><a class="headerlink" href="#stdnet.odm.KeyValueMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>A mixin for ordered and unordered key-valued pair containers.
A key-value pair container has the <tt class="xref py py-meth docutils literal"><span class="pre">values()</span></tt> and <tt class="xref py py-meth docutils literal"><span class="pre">items()</span></tt>
methods, while its iterator is over keys.</p>
<dl class="method">
<dt id="stdnet.odm.KeyValueMixin.get">
<tt class="descname">get</tt><big>(</big><em>key</em>, <em>default=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.KeyValueMixin.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a single element from the structure.
If the element is not available return the default value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>key</strong> &#8211; lookup field</li>
<li><strong>default</strong> &#8211; default value when the field is not available</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.KeyValueMixin.remove">
<tt class="descname">remove</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.KeyValueMixin.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove <em>keys</em> from the key-value container.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stdnet.odm.OrderedMixin">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">OrderedMixin</tt><a class="headerlink" href="#stdnet.odm.OrderedMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>A mixin for a <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a> which maintains ordering with respect
a numeric value we call score.</p>
<dl class="method">
<dt id="stdnet.odm.OrderedMixin.front">
<tt class="descname">front</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.OrderedMixin.front" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the front pair of the structure</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.OrderedMixin.back">
<tt class="descname">back</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.OrderedMixin.back" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the back pair of the structure</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.OrderedMixin.count">
<tt class="descname">count</tt><big>(</big><em>start</em>, <em>stop</em><big>)</big><a class="headerlink" href="#stdnet.odm.OrderedMixin.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of elements bewteen <em>start</em> and <em>stop</em>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.OrderedMixin.range">
<tt class="descname">range</tt><big>(</big><em>start</em>, <em>stop</em>, <em>callback=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.OrderedMixin.range" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a range with scores between start and end.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.OrderedMixin.irange">
<tt class="descname">irange</tt><big>(</big><em>start=0</em>, <em>end=-1</em>, <em>callback=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.OrderedMixin.irange" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the range by rank between start and end.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.OrderedMixin.pop_range">
<tt class="descname">pop_range</tt><big>(</big><em>start</em>, <em>stop</em>, <em>callback=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.OrderedMixin.pop_range" title="Permalink to this definition">¶</a></dt>
<dd><p>pop a range by score from the <a class="reference internal" href="#stdnet.odm.OrderedMixin" title="stdnet.odm.OrderedMixin"><tt class="xref py py-class docutils literal"><span class="pre">OrderedMixin</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.OrderedMixin.ipop_range">
<tt class="descname">ipop_range</tt><big>(</big><em>start=0</em>, <em>stop=-1</em>, <em>callback=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.OrderedMixin.ipop_range" title="Permalink to this definition">¶</a></dt>
<dd><p>pop a range from the <a class="reference internal" href="#stdnet.odm.OrderedMixin" title="stdnet.odm.OrderedMixin"><tt class="xref py py-class docutils literal"><span class="pre">OrderedMixin</span></tt></a></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="list">
<h3>List<a class="headerlink" href="#list" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.List">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">List</tt><big>(</big><em>instance=None</em>, <em>timeout=0</em>, <em>value_pickler=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.List" title="Permalink to this definition">¶</a></dt>
<dd><p>A doubly-linked list <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a>. It expands the
<a class="reference internal" href="#stdnet.odm.Sequence" title="stdnet.odm.Sequence"><tt class="xref py py-class docutils literal"><span class="pre">Sequence</span></tt></a> mixin with functionalities to add and remove from
the front of the list in an efficient manner.</p>
<dl class="method">
<dt id="stdnet.odm.List.pop_front">
<tt class="descname">pop_front</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.List.pop_front" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the first element from of the list.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.List.push_front">
<tt class="descname">push_front</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.List.push_front" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends a copy of <em>value</em> to the beginning of the list.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="set">
<h3>Set<a class="headerlink" href="#set" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Set">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Set</tt><big>(</big><em>instance=None</em>, <em>timeout=0</em>, <em>value_pickler=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Set" title="Permalink to this definition">¶</a></dt>
<dd><p>An unordered set <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a>. Equivalent to a python <tt class="docutils literal"><span class="pre">set</span></tt>.</p>
<dl class="method">
<dt id="stdnet.odm.Set.add">
<tt class="descname">add</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Set.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add <em>value</em> to the set</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Set.update">
<tt class="descname">update</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Set.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Add iterable <em>values</em> to the set</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Set.discard">
<tt class="descname">discard</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Set.discard" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove an element <em>value</em> from a set if it is a member.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Set.remove">
<tt class="descname">remove</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Set.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove an element <em>value</em> from a set if it is a member.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Set.difference_update">
<tt class="descname">difference_update</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Set.difference_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove an iterable of <em>values</em> from the set.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="orderedset">
<span id="orderedset-structure"></span><h3>OrderedSet<a class="headerlink" href="#orderedset" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Zset">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Zset</tt><big>(</big><em>instance=None</em>, <em>timeout=0</em>, <em>value_pickler=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Zset" title="Permalink to this definition">¶</a></dt>
<dd><p>An ordered version of <a class="reference internal" href="#stdnet.odm.Set" title="stdnet.odm.Set"><tt class="xref py py-class docutils literal"><span class="pre">Set</span></tt></a>. It derives from
<a class="reference internal" href="#stdnet.odm.OrderedMixin" title="stdnet.odm.OrderedMixin"><tt class="xref py py-class docutils literal"><span class="pre">OrderedMixin</span></tt></a> and <a class="reference internal" href="#stdnet.odm.PairMixin" title="stdnet.odm.PairMixin"><tt class="xref py py-class docutils literal"><span class="pre">PairMixin</span></tt></a>.</p>
<dl class="method">
<dt id="stdnet.odm.Zset.rank">
<tt class="descname">rank</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#stdnet.odm.Zset.rank" title="Permalink to this definition">¶</a></dt>
<dd><p>The rank of a given <em>value</em>. This is the position of <em>value</em>
in the <a class="reference internal" href="#stdnet.odm.OrderedMixin" title="stdnet.odm.OrderedMixin"><tt class="xref py py-class docutils literal"><span class="pre">OrderedMixin</span></tt></a> container.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="hashtable">
<span id="hash-structure"></span><h3>HashTable<a class="headerlink" href="#hashtable" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.HashTable">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">HashTable</tt><big>(</big><em>instance=None</em>, <em>timeout=0</em>, <em>value_pickler=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.HashTable" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a> which is the networked equivalent to
a Python <tt class="docutils literal"><span class="pre">dict</span></tt>. Derives from <a class="reference internal" href="#stdnet.odm.KeyValueMixin" title="stdnet.odm.KeyValueMixin"><tt class="xref py py-class docutils literal"><span class="pre">KeyValueMixin</span></tt></a>.</p>
<dl class="method">
<dt id="stdnet.odm.HashTable.addnx">
<tt class="descname">addnx</tt><big>(</big><em>field</em>, <em>value</em>, <em>transaction=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.HashTable.addnx" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value of a hash field only if the field
does not exist.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="ts">
<h3>TS<a class="headerlink" href="#ts" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.TS">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">TS</tt><big>(</big><em>instance=None</em>, <em>timeout=0</em>, <em>value_pickler=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.TS" title="Permalink to this definition">¶</a></dt>
<dd><p>A timeseries is a <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a> which derives from 
<a class="reference internal" href="#stdnet.odm.OrderedMixin" title="stdnet.odm.OrderedMixin"><tt class="xref py py-class docutils literal"><span class="pre">OrderedMixin</span></tt></a> and <a class="reference internal" href="#stdnet.odm.KeyValueMixin" title="stdnet.odm.KeyValueMixin"><tt class="xref py py-class docutils literal"><span class="pre">KeyValueMixin</span></tt></a>.
It represents an ordered associative container where keys are timestamps
and values are objects.</p>
<dl class="method">
<dt id="stdnet.odm.TS.rank">
<tt class="descname">rank</tt><big>(</big><em>dte</em><big>)</big><a class="headerlink" href="#stdnet.odm.TS.rank" title="Permalink to this definition">¶</a></dt>
<dd><p>The rank of a given <em>dte</em> in the timeseries</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.TS.ipop">
<tt class="descname">ipop</tt><big>(</big><em>index</em><big>)</big><a class="headerlink" href="#stdnet.odm.TS.ipop" title="Permalink to this definition">¶</a></dt>
<dd><p>Pop a value at <em>index</em> from the <a class="reference internal" href="#stdnet.odm.TS" title="stdnet.odm.TS"><tt class="xref py py-class docutils literal"><span class="pre">TS</span></tt></a>. Return <tt class="xref docutils literal"><span class="pre">None</span></tt> if
index is not out of bound.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.TS.times">
<tt class="descname">times</tt><big>(</big><em>start</em>, <em>stop</em>, <em>callback=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.TS.times" title="Permalink to this definition">¶</a></dt>
<dd><p>The times between times <em>start</em> and <em>stop</em>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.TS.itimes">
<tt class="descname">itimes</tt><big>(</big><em>start=0</em>, <em>stop=-1</em>, <em>callback=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.TS.itimes" title="Permalink to this definition">¶</a></dt>
<dd><p>The times between rank <em>start</em> and <em>stop</em>.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="session-and-managers">
<h2>Session and Managers<a class="headerlink" href="#session-and-managers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="session">
<h3>Session<a class="headerlink" href="#session" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Session">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Session</tt><big>(</big><em>backend</em>, <em>query_class=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session" title="Permalink to this definition">¶</a></dt>
<dd><p>The manager of persistent operations on the backend data server for
<a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> classes.</p>
<dl class="attribute">
<dt id="stdnet.odm.Session.backend">
<tt class="descname">backend</tt><a class="headerlink" href="#stdnet.odm.Session.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="backends.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a> instance</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Session.transaction">
<tt class="descname">transaction</tt><a class="headerlink" href="#stdnet.odm.Session.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> instance. Not <tt class="xref docutils literal"><span class="pre">None</span></tt> if this <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>
is in a transactional state.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Session.query_class">
<tt class="descname">query_class</tt><a class="headerlink" href="#stdnet.odm.Session.query_class" title="Permalink to this definition">¶</a></dt>
<dd><p>class for querying. Default is <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.session">
<tt class="descname">session</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Session.session" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new session from this <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a></p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Session.dirty">
<tt class="descname">dirty</tt><a class="headerlink" href="#stdnet.odm.Session.dirty" title="Permalink to this definition">¶</a></dt>
<dd><p>set of all changed instances in the session</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.begin">
<tt class="descname">begin</tt><big>(</big><em>**options</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin a new class:<cite>Transaction</cite>.
If this <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> is already within a transaction, an error is raised.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.query">
<tt class="descname">query</tt><big>(</big><em>model</em>, <em>query_class=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> for <em>model</em>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.get_or_create">
<tt class="descname">get_or_create</tt><big>(</big><em>model</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.get_or_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an instance of <em>model</em> from the internal cache (only if the
dictionary <em>kwargs</em> is of length 1 and has key given by <tt class="docutils literal"><span class="pre">id</span></tt>) or from the
server. If it the instance is not available, it tries to create one
from the <strong>kwargs</strong> parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>model</strong> &#8211; a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a></li>
<li><strong>kwargs</strong> &#8211; dictionary of parameters.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">an instance of  two elements tuple containing the instance and a boolean
indicating if the instance was created or not.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.add">
<tt class="descname">add</tt><big>(</big><em>element</em>, <em>modified=True</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an <em>instance</em> to the session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>instance</strong> &#8211; a class:<cite>StdModel</cite> or a <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a> instance.</li>
<li><strong>modified</strong> &#8211; a boolean flag indictaing if the instance was modified.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.delete">
<tt class="descname">delete</tt><big>(</big><em>element</em>, <em>modified=True</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an <em>instance</em> to the session instances to be deleted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>instance</strong> &#8211; a class:<cite>StdModel</cite> or a <a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a> instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.flush">
<tt class="descname">flush</tt><big>(</big><em>model</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Completely flush a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> from the database. No keys
associated with the model will exists after this operation.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.clean">
<tt class="descname">clean</tt><big>(</big><em>model</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove empty keys for a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> from the database. No
empty keys associated with the model will exists after this operation.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.keys">
<tt class="descname">keys</tt><big>(</big><em>model</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve all keys for a <em>model</em>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.commit">
<tt class="descname">commit</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Session.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the current transaction.
If no transaction is in progress, this method open one a.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Session.structure">
<tt class="descname">structure</tt><big>(</big><em>instance</em><big>)</big><a class="headerlink" href="#stdnet.odm.Session.structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendStructure</span></tt> for a given
<a class="reference internal" href="#stdnet.odm.Structure" title="stdnet.odm.Structure"><tt class="xref py py-class docutils literal"><span class="pre">Structure</span></tt></a> <em>instance</em>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="session-model">
<h3>Session Model<a class="headerlink" href="#session-model" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.SessionModel">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">SessionModel</tt><big>(</big><em>meta</em>, <em>session</em><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#stdnet.odm.SessionModel" title="stdnet.odm.SessionModel"><tt class="xref py py-class docutils literal"><span class="pre">SessionModel</span></tt></a> is the container of all objects for a given
<a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> in a stdnet <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>.</p>
<dl class="attribute">
<dt id="stdnet.odm.SessionModel.new">
<tt class="descname">new</tt><a class="headerlink" href="#stdnet.odm.SessionModel.new" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all modified instances within this <tt class="docutils literal"><span class="pre">Session</span></tt></p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.SessionModel.modified">
<tt class="descname">modified</tt><a class="headerlink" href="#stdnet.odm.SessionModel.modified" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all modified instances within this <tt class="docutils literal"><span class="pre">Session</span></tt></p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.SessionModel.loaded">
<tt class="descname">loaded</tt><a class="headerlink" href="#stdnet.odm.SessionModel.loaded" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all unmodified, but not deleted, instances within this
<a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.SessionModel.deleted">
<tt class="descname">deleted</tt><a class="headerlink" href="#stdnet.odm.SessionModel.deleted" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances marked as &#8216;deleted&#8217; within this
<a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.SessionModel.dirty">
<tt class="descname">dirty</tt><a class="headerlink" href="#stdnet.odm.SessionModel.dirty" title="Permalink to this definition">¶</a></dt>
<dd><p>The set of all instances which have changed, but not deleted,
within this <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.iterdirty">
<tt class="descname">iterdirty</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.iterdirty" title="Permalink to this definition">¶</a></dt>
<dd><p>Ordered iterator over dirty elements.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.add">
<tt class="descname">add</tt><big>(</big><em>instance</em>, <em>modified=True</em>, <em>persistent=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new instance to the session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">The instance added to the session</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.delete">
<tt class="descname">delete</tt><big>(</big><em>instance</em>, <em>session</em><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>delete an <em>instance</em></p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.pop">
<tt class="descname">pop</tt><big>(</big><em>instance</em><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove <em>instance</em> from the <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>. Instance could be a
<a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> or an id.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>instance</strong> &#8211; a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> or an <em>id</em></td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">the <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> removed from session or <tt class="xref docutils literal"><span class="pre">None</span></tt> if
it was not in the session.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.expunge">
<tt class="descname">expunge</tt><big>(</big><em>instance</em><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.expunge" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove <em>instance</em> from the <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>. Instance could be a
<a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> or an id.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>instance</strong> &#8211; a <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> or an <em>id</em></td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">the <a class="reference internal" href="#stdnet.odm.Model" title="stdnet.odm.Model"><tt class="xref py py-class docutils literal"><span class="pre">Model</span></tt></a> removed from session or <tt class="xref docutils literal"><span class="pre">None</span></tt> if
it was not in the session.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.SessionModel.post_commit">
<tt class="descname">post_commit</tt><big>(</big><em>results</em><big>)</big><a class="headerlink" href="#stdnet.odm.SessionModel.post_commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Process results after a commit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>results</strong> &#8211; iterator over <tt class="xref py py-class docutils literal"><span class="pre">stdnet.instance_session_result</span></tt>
items.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a two elements tuple containing a list of instances saved and
a list of ids of instances deleted.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="transaction">
<h3>Transaction<a class="headerlink" href="#transaction" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Transaction">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Transaction</tt><big>(</big><em>session</em>, <em>name=None</em>, <em>signal_commit=True</em>, <em>signal_delete=True</em>, <em>signal_session=True</em>, <em>logger=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Transaction class for pipelining commands to the backend server.
An instance of this class is usually obtained via the <a class="reference internal" href="#stdnet.odm.Session.begin" title="stdnet.odm.Session.begin"><tt class="xref py py-meth docutils literal"><span class="pre">Session.begin()</span></tt></a>
or the <a class="reference internal" href="#stdnet.odm.Manager.transaction" title="stdnet.odm.Manager.transaction"><tt class="xref py py-meth docutils literal"><span class="pre">Manager.transaction()</span></tt></a> methods:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span>
</pre></div>
</div>
<p>or using the <tt class="docutils literal"><span class="pre">with</span></tt> context manager:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">with</span> <span class="n">session</span><span class="o">.</span><span class="n">begin</span><span class="p">()</span> <span class="k">as</span> <span class="n">t</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="stdnet.odm.Transaction.session">
<tt class="descname">session</tt><a class="headerlink" href="#stdnet.odm.Transaction.session" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> which is being transacted.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Transaction.name">
<tt class="descname">name</tt><a class="headerlink" href="#stdnet.odm.Transaction.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> name</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Transaction.backend">
<tt class="descname">backend</tt><a class="headerlink" href="#stdnet.odm.Transaction.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="backends.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a> to which the transaction
is being performed.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Transaction.signal_commit">
<tt class="descname">signal_commit</tt><a class="headerlink" href="#stdnet.odm.Transaction.signal_commit" title="Permalink to this definition">¶</a></dt>
<dd><p>If <tt class="xref docutils literal"><span class="pre">True</span></tt>, a signal for each model in the transaction is triggered
just after changes are committed.
The signal carries a list of updated <tt class="docutils literal"><span class="pre">instances</span></tt> of the model,
the <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> and the <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> itself.</p>
<p>default <tt class="xref docutils literal"><span class="pre">True</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Transaction.signal_delete">
<tt class="descname">signal_delete</tt><a class="headerlink" href="#stdnet.odm.Transaction.signal_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>If <tt class="xref docutils literal"><span class="pre">True</span></tt> a signal for each model in the transaction is triggered
just after deletion of instances.
The signal carries the list <tt class="docutils literal"><span class="pre">ids</span></tt> of deleted instances of the mdoel,
the <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> and the <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> itself.</p>
<p>default <tt class="xref docutils literal"><span class="pre">True</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Transaction.logger">
<tt class="descname">logger</tt><a class="headerlink" href="#stdnet.odm.Transaction.logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional python logging object</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Transaction.add">
<tt class="descname">add</tt><big>(</big><em>instance</em><big>)</big><a class="headerlink" href="#stdnet.odm.Transaction.add" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience proxy for <a class="reference internal" href="#stdnet.odm.Session.add" title="stdnet.odm.Session.add"><tt class="xref py py-meth docutils literal"><span class="pre">Session.add()</span></tt></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Transaction.delete">
<tt class="descname">delete</tt><big>(</big><em>instance</em><big>)</big><a class="headerlink" href="#stdnet.odm.Transaction.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience proxy for <a class="reference internal" href="#stdnet.odm.Session.delete" title="stdnet.odm.Session.delete"><tt class="xref py py-meth docutils literal"><span class="pre">Session.delete()</span></tt></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Transaction.query">
<tt class="descname">query</tt><big>(</big><em>model</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Transaction.query" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience proxy for <a class="reference internal" href="#stdnet.odm.Session.query" title="stdnet.odm.Session.query"><tt class="xref py py-meth docutils literal"><span class="pre">Session.query()</span></tt></a> method.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Transaction.commit">
<tt class="descname">commit</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Transaction.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the transaction and commit session to the backend.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Transaction.post_commit">
<tt class="descname">post_commit</tt><big>(</big><em>response=None</em>, <em>commands=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Transaction.post_commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback from the <a class="reference internal" href="backends.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a> once the
<a class="reference internal" href="#stdnet.odm.Transaction.session" title="stdnet.odm.Transaction.session"><tt class="xref py py-attr docutils literal"><span class="pre">session</span></tt></a> commit has finished and results are available.
Results can contain errors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>response</strong> &#8211; list of results for each <a class="reference internal" href="#stdnet.odm.SessionModel" title="stdnet.odm.SessionModel"><tt class="xref py py-class docutils literal"><span class="pre">SessionModel</span></tt></a>
in <a class="reference internal" href="#stdnet.odm.Transaction.session" title="stdnet.odm.Transaction.session"><tt class="xref py py-attr docutils literal"><span class="pre">session</span></tt></a>. Each element in the list is a three-element tuple
with the <tt class="xref py py-attr docutils literal"><span class="pre">SessionModel.meta</span></tt> element, a list of ids and the commit
action performed (one of <tt class="docutils literal"><span class="pre">save</span></tt> and <tt class="docutils literal"><span class="pre">delete</span></tt>).</li>
<li><strong>commands</strong> &#8211; The commands executed by the
<a class="reference internal" href="backends.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a> and stored in this <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a>
for information.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="manager">
<h3>Manager<a class="headerlink" href="#manager" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.Manager">
<em class="property">class </em><tt class="descclassname">stdnet.odm.</tt><tt class="descname">Manager</tt><big>(</big><em>model=None</em>, <em>backend=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager" title="Permalink to this definition">¶</a></dt>
<dd><p>A manager class for models. Each <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a>
contains at least one manager which can be accessed via the <tt class="docutils literal"><span class="pre">objects</span></tt>
class attribute:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">odm</span><span class="o">.</span><span class="n">StdModel</span><span class="p">):</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">SymbolField</span><span class="p">()</span>
    <span class="n">flag</span> <span class="o">=</span> <span class="n">odm</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">()</span>

<span class="n">MyModel</span><span class="o">.</span><span class="n">objects</span>
</pre></div>
</div>
<p>Managers are used as <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> and <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> factories
for a given <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">session</span> <span class="o">=</span> <span class="n">MyModel</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">session</span><span class="p">()</span>
<span class="n">query</span> <span class="o">=</span> <span class="n">MyModel</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="stdnet.odm.Manager.model">
<tt class="descname">model</tt><a class="headerlink" href="#stdnet.odm.Manager.model" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> for this <a class="reference internal" href="#stdnet.odm.Manager" title="stdnet.odm.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a>. This attribute is
assigned by the Object relational mapper at runtime.</p>
</dd></dl>

<dl class="attribute">
<dt id="stdnet.odm.Manager.backend">
<tt class="descname">backend</tt><a class="headerlink" href="#stdnet.odm.Manager.backend" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="backends.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a> for this <a class="reference internal" href="#stdnet.odm.Manager" title="stdnet.odm.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.register">
<tt class="descname">register</tt><big>(</big><em>model</em>, <em>backend=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register the Manager with a model and a backend database.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.session">
<tt class="descname">session</tt><big>(</big><em>transaction=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.session" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.transaction">
<tt class="descname">transaction</tt><big>(</big><em>*models</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a>. If models are specified, it check
if their managers have the same backend database.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.query">
<tt class="descname">query</tt><big>(</big><em>transaction=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="#stdnet.odm.Query" title="stdnet.odm.Query"><tt class="xref py py-class docutils literal"><span class="pre">Query</span></tt></a> for the <a class="reference internal" href="#stdnet.odm.Manager.model" title="stdnet.odm.Manager.model"><tt class="xref py py-attr docutils literal"><span class="pre">Manager.model</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="stdnet.odm.Manager.empty">
<tt class="descname">empty</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.Manager.empty" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an empty :class;`Query`</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="relatedmanager">
<h3>RelatedManager<a class="headerlink" href="#relatedmanager" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.related.RelatedManager">
<em class="property">class </em><tt class="descclassname">stdnet.odm.related.</tt><tt class="descname">RelatedManager</tt><big>(</big><em>field</em>, <em>model=None</em>, <em>instance=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.related.RelatedManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for managers handling relationships between models.
While standard <a class="reference internal" href="#stdnet.odm.Manager" title="stdnet.odm.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> are class properties of a model,
related managers are accessed by instances to easily retrieve instances
of a related model.</p>
<dl class="method">
<dt id="stdnet.odm.related.RelatedManager.session">
<tt class="descname">session</tt><big>(</big><em>transaction=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.related.RelatedManager.session" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the session for this <tt class="xref py py-class docutils literal"><span class="pre">RelatedManager</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><strong>transaction</strong> &#8211; an optional session <a class="reference internal" href="#stdnet.odm.Transaction" title="stdnet.odm.Transaction"><tt class="xref py py-class docutils literal"><span class="pre">Transaction</span></tt></a> to use.</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body">a <a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="one2manyrelatedmanager">
<h3>One2ManyRelatedManager<a class="headerlink" href="#one2manyrelatedmanager" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="stdnet.odm.related.One2ManyRelatedManager">
<em class="property">class </em><tt class="descclassname">stdnet.odm.related.</tt><tt class="descname">One2ManyRelatedManager</tt><big>(</big><em>field</em>, <em>model=None</em>, <em>instance=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.related.One2ManyRelatedManager" title="Permalink to this definition">¶</a></dt>
<dd><p>A specialised <tt class="xref py py-class docutils literal"><span class="pre">RelatedManager</span></tt> for handling one-to-many
relationships under the hood.
If a model has a <a class="reference internal" href="fields.html#stdnet.odm.ForeignKey" title="stdnet.odm.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> field, instances of
that model will have access to the related (foreign) objects
via a simple attribute of the model.</p>
</dd></dl>

</div>
</div>
<div class="section" id="registration">
<span id="register-model"></span><h2>Registration<a class="headerlink" href="#registration" title="Permalink to this headline">¶</a></h2>
<p>Models can be registered with a <a class="reference internal" href="backends.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a> so that
the model <a class="reference internal" href="#stdnet.odm.Manager" title="stdnet.odm.Manager"><tt class="xref py py-class docutils literal"><span class="pre">Manager</span></tt></a> can be used to create instance and query the database.
If a model is not registered, the only way to operate on it is via the
<a class="reference internal" href="#stdnet.odm.Session" title="stdnet.odm.Session"><tt class="xref py py-class docutils literal"><span class="pre">Session</span></tt></a> API.</p>
<p>Stdnet provides two registration functions, a low level and a higher level one
which can be used to register several models at once.</p>
<div class="section" id="register">
<h3>Register<a class="headerlink" href="#register" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="stdnet.odm.register">
<tt class="descclassname">stdnet.odm.</tt><tt class="descname">register</tt><big>(</big><em>model</em>, <em>backend=None</em>, <em>ignore_duplicates=True</em>, <em>local_thread=False</em>, <em>**params</em><big>)</big><a class="headerlink" href="#stdnet.odm.register" title="Permalink to this definition">¶</a></dt>
<dd><p>The low level function for registering a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a>
classes with a <a class="reference internal" href="backends.html#stdnet.BackendDataServer" title="stdnet.BackendDataServer"><tt class="xref py py-class docutils literal"><span class="pre">stdnet.BackendDataServer</span></tt></a> data server.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>model</strong> &#8211; a <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a>. Must be provided.</li>
<li><strong>backend</strong> &#8211; <p>a backend connection string.
For example:</p>
<div class="highlight-python"><pre>redis://localhost:8080?db=6&amp;prefix=bla.</pre>
</div>
<p>Default <tt class="docutils literal"><span class="pre">settings.DEFAULT_BACKEND</span></tt>.</p>
</li>
<li><strong>params</strong> &#8211; optional parameters which can be used to override the
connection string parameters.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Usage</strong></p>
<p>For Redis the syntax is the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">odm</span>

<span class="n">odm</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Author</span><span class="p">,</span> <span class="s">&#39;redis://my.host.name:6379/?db=1&#39;</span><span class="p">)</span>
<span class="n">odm</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Book</span><span class="p">,</span> <span class="s">&#39;redis://my.host.name:6379/?db=2&#39;</span><span class="p">)</span>
<span class="n">odm</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">MyOtherModel</span><span class="p">,</span>
            <span class="s">&#39;redis://my.host.name:6379/?db=2&amp;keyprefix=differentprefix.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">my.host.name</span></tt> can be <tt class="docutils literal"><span class="pre">localhost</span></tt> or an ip address or a domain name,
while <tt class="docutils literal"><span class="pre">db</span></tt> indicates the database number (very useful for separating data
on the same redis instance).</p>
</dd></dl>

</div>
<div class="section" id="register-application-models">
<h3>Register application models<a class="headerlink" href="#register-application-models" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="stdnet.odm.register_application_models">
<tt class="descclassname">stdnet.odm.</tt><tt class="descname">register_application_models</tt><big>(</big><em>applications</em>, <em>models=None</em>, <em>app_defaults=None</em>, <em>default=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.register_application_models" title="Permalink to this definition">¶</a></dt>
<dd><p>A higher level registration functions for group of models located
on application modules.
It uses the <a class="reference internal" href="utility.html#stdnet.odm.model_iterator" title="stdnet.odm.model_iterator"><tt class="xref py py-func docutils literal"><span class="pre">model_iterator()</span></tt></a> function to iterate
through all <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a> models available in <tt class="docutils literal"><span class="pre">applications</span></tt>
and register them using the <a class="reference internal" href="#stdnet.odm.register" title="stdnet.odm.register"><tt class="xref py py-func docutils literal"><span class="pre">register()</span></tt></a> low level function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>applications</strong> &#8211; A String or a list of strings which represent
python dotted paths where models are implemented.</li>
<li><strong>models</strong> &#8211; Optional list of models to include. If not provided
all models found in <em>applications</em> will be included.</li>
<li><strong>app_defaults</strong> &#8211; optional dictionary which specify a model and/or
application backend connection string.</li>
<li><strong>default</strong> &#8211; The default connection string.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">A generator over registered <a class="reference internal" href="#stdnet.odm.StdModel" title="stdnet.odm.StdModel"><tt class="xref py py-class docutils literal"><span class="pre">StdModel</span></tt></a>.</p>
</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">register_application_models</span><span class="p">(</span><span class="s">&#39;mylib.myapp&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="register-applications">
<h3>Register applications<a class="headerlink" href="#register-applications" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="stdnet.odm.register_applications">
<tt class="descclassname">stdnet.odm.</tt><tt class="descname">register_applications</tt><big>(</big><em>applications</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#stdnet.odm.register_applications" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple convenience wrapper around the
<a class="reference internal" href="#stdnet.odm.register_application_models" title="stdnet.odm.register_application_models"><tt class="xref py py-func docutils literal"><span class="pre">stdnet.odm.register_application_models()</span></tt></a> generator.</p>
<p>It return s a list of registered models.</p>
</dd></dl>

</div>
<div class="section" id="registered-models">
<h3>Registered models<a class="headerlink" href="#registered-models" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="stdnet.odm.registered_models">
<tt class="descclassname">stdnet.odm.</tt><tt class="descname">registered_models</tt><big>(</big><big>)</big><a class="headerlink" href="#stdnet.odm.registered_models" title="Permalink to this definition">¶</a></dt>
<dd><p>An iterator over registered models</p>
</dd></dl>

</div>
<div class="section" id="unregister-model">
<h3>Unregister model<a class="headerlink" href="#unregister-model" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="stdnet.odm.unregister">
<tt class="descclassname">stdnet.odm.</tt><tt class="descname">unregister</tt><big>(</big><em>model=None</em><big>)</big><a class="headerlink" href="#stdnet.odm.unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregister a <em>model</em> if provided, otherwise it unregister all
registered models.</p>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo">
<a href="../index.html">
  <img class="logo" width="200" src="../static/net.jpg" alt="Logo"/>
</a>
</p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Model and Query API</a><ul>
<li><a class="reference internal" href="#model">Model</a><ul>
<li><a class="reference internal" href="#stdmodel-class">StdModel Class</a></li>
<li><a class="reference internal" href="#data-server-metaclass">Data Server Metaclass</a></li>
<li><a class="reference internal" href="#id1">Model</a></li>
<li><a class="reference internal" href="#autoincrement">autoincrement</a></li>
</ul>
</li>
<li><a class="reference internal" href="#queries">Queries</a><ul>
<li><a class="reference internal" href="#query-base-class">Query base class</a></li>
<li><a class="reference internal" href="#query">Query</a></li>
<li><a class="reference internal" href="#queryelement">QueryElement</a></li>
<li><a class="reference internal" href="#searchengine-interface">SearchEngine Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-structures">Data Structures</a><ul>
<li><a class="reference internal" href="#creating-structures">Creating Structures</a></li>
<li><a class="reference internal" href="#base-class-and-mixins">Base Class and Mixins</a></li>
<li><a class="reference internal" href="#list">List</a></li>
<li><a class="reference internal" href="#set">Set</a></li>
<li><a class="reference internal" href="#orderedset">OrderedSet</a></li>
<li><a class="reference internal" href="#hashtable">HashTable</a></li>
<li><a class="reference internal" href="#ts">TS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#session-and-managers">Session and Managers</a><ul>
<li><a class="reference internal" href="#session">Session</a></li>
<li><a class="reference internal" href="#session-model">Session Model</a></li>
<li><a class="reference internal" href="#transaction">Transaction</a></li>
<li><a class="reference internal" href="#manager">Manager</a></li>
<li><a class="reference internal" href="#relatedmanager">RelatedManager</a></li>
<li><a class="reference internal" href="#one2manyrelatedmanager">One2ManyRelatedManager</a></li>
</ul>
</li>
<li><a class="reference internal" href="#registration">Registration</a><ul>
<li><a class="reference internal" href="#register">Register</a></li>
<li><a class="reference internal" href="#register-application-models">Register application models</a></li>
<li><a class="reference internal" href="#register-applications">Register applications</a></li>
<li><a class="reference internal" href="#registered-models">Registered models</a></li>
<li><a class="reference internal" href="#unregister-model">Unregister model</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">API</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="fields.html"
                        title="next chapter">Fields API</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../sources/api/models.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="fields.html" title="Fields API"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="API"
             >previous</a> |</li>
        <li><a href="../index.html">python stdnet v0.7 documentation</a> &raquo;</li>
          <li><a href="index.html" >API</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2010-2011, Luca Sbardella.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3900561-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>